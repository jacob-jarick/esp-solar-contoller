<html>
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<center> <h1 id=title_hostn></h1></center>
<br>

<center>

<script type="text/javascript">
function batcal_add_row(cell, voltage, modifier)
{
  console.log("batcal_add_row('" +  cell + "', '" + voltage + "', '" + modifier + "')");

  var table = document.getElementById('battery_table');
  var row = table.insertRow(-1);

  var cell1 = row.insertCell(0);
  cell1.innerHTML = cell;

  // volt old
  var cell2 = row.insertCell(1);
  cell2.innerHTML = "<input id='bv_old" + cell + "' type=text name='bv_old" + cell + "' value='" + voltage + "' readonly>";

  // mod old
  var cell3 = row.insertCell(2);
//   cell3.innerHTML = modifier;
  cell3.innerHTML = "<input id='bvm_old" + cell + "' type=text name='bvm_old" + cell + "' value='" + modifier + "' readonly>";

  // volt new
  var cell4 = row.insertCell(3);
  cell4.innerHTML = "<input id='bv" + cell + "' type=text name='bv" + cell + "' value='" + voltage + "'  onchange=\"battery_calc("+ cell +")\" >";

  // mod new
  var cell5 = row.insertCell(4);
  cell5.innerHTML = "<input id='battery_volt_mod" + cell + "' type=text name='battery_volt_mod" + cell + "' value='" + modifier + "'>";
}

function battery_calc(cell)
{
  var mod_old = document.getElementById("bvm_old"+cell).value;
  var volt_old = document.getElementById("bv_old"+cell).value;
  var volt_new = document.getElementById("bv"+cell).value;

  var mod_new = (volt_new / volt_old) * mod_old;
  document.getElementById("battery_volt_mod"+cell).value = mod_new;

}

</script>

<form action='/result' method='POST'>

<table border=1>

<tr><td colspan=2><b>UPS Config</b></td></tr>
<tr>
	<td>Monitor Battery</td>
	<td>
		<input id=monitor_battery1 type=radio name="monitor_battery" value=1> Enable
		<input id=monitor_battery0 type=radio name="monitor_battery" value=0> Disable
	</td>
</tr>

<tr><td>High Voltage Reconnect Delay (Hours):</td>
<td id=hvrd>
x
</td>
</tr>

<tr><td>Low Voltage Reconnect Delay (Hours):</td>
<td id=lvrd>
	x
</td>
</tr>

<tr><td colspan=2><b>Battery Config</b></td></tr>

<tr><td>Cells in Series</td>
<td>
	<select id=cells_in_series name='cells_in_series'>
	<option value=0>False</option>
	<option value=1>True</option>
	</select>
</td>
</tr>

<tr>
	<td>Battery Pack Cell Count</td>
	<td id=idcc>
x
	</td>
</tr>

<tr><td>Min Pack Voltage:</td>
<td id=pvm>
x
</td>
</tr>

<tr><td>Min Cell Voltage:</td>
<td id=bvmin>
x
</td>
</tr>

<tr><td>Cell Reconnect Voltage:</td>
<td id=bvrec>
x
</td>
</tr>


<tr><td>Cell Idle Voltage:</td>
<td id=bvidl>
x
</td>
</tr>

<tr><td>Max Cell Voltage:</td>
<td id=bvmax>
x
</td>
</tr>

<tr><td>Cell Over Voltage:</td>
<td id=cvo>
x
</td>
</tr>

<tr><td>Voltage Offset:</td>
<td id=voff>
x
</td>
</tr>

<tr><td colspan=2><b>Cell Multiplier(s)</b></td></tr>

<tr><td>Cell 1</td>
<td id=bvm1>
1
</td>
</tr>

<tr><td>Cell 2</td>
<td id=bvm2>
2
</td>
</tr>

<tr><td>Cell 3</td>
<td id=bvm3>
3
</td>
</tr>

<tr><td>Cell 4</td>
<td id=bvm4>
4
</td>
</tr>

<tr><td>Cell 5</td>
<td id=bvm5>
5
</td>
</tr>

<tr><td>Cell 6</td>
<td id=bvm6>
6
</td>
</tr>

<tr><td>Cell 7</td>
<td id=bvm7>
7
</td>
</tr>

<tr><td>Cell 8</td>
<td id=bvm8>
8
</td>
</tr>

<tr><td>Cell 9</td>
<td id=bvm9>
x
</td>
</tr>

<tr><td>Cell 10</td>
<td id=bvm10>
x
</td>
</tr>

<tr><td>Cell 11</td>
<td id=bvm11>
x
</td>
</tr>

<tr><td>Cell 12</td>
<td id=bvm12>
12
</td>
</tr>

<tr><td>Cell 13</td>
<td id=bvm13>
13
</td>
</tr>

<tr><td>Cell 14</td>
<td id=bvm14>
14
</td>
</tr>

<tr><td>Cell 15</td>
<td id=bvm15>
15
</td>
</tr>

<tr><td>Cell 16</td>
<td id=bvm16>
16
</td>
</tr>

<tr><td colspan=2><b>Submit</b></td></tr>

<tr><td>Password:</td><td><input id=passwd type=password name='passwd' value=''> <input type=submit value=submit></td></tr>

</table>
</center>
</form>
