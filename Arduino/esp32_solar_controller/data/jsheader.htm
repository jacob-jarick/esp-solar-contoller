<script type="text/javascript">

// set select value
function ssv(id, val)
{
    document.getElementById(id).value = val;
}

function select_add_option(id, value, value_txt) {
    var x = document.getElementById(id);
    var option = document.createElement("option");
    option.text = value_txt;
    option.value = value;
    x.add(option);
}

//add_input("hvrd", "hv_shutdown_delay", "3", "10", "...")

function add_input(html_id, input_id, input_length, input_value, input_note)
{
  console.log("add_input: " + html_id);
  var new_input = `<input size="`+input_length+`" id="`+input_id+`" name="`+input_id+`" type="text"  value="`+input_value+`">&nbsp;` + input_note;
  document.getElementById(html_id).innerHTML = new_input;
}

// set innerHTML
function shtml(id, value)
{
  document.getElementById(id).innerHTML = value;
}

// set value
function sv(id, value)
{
  console.log("set value('" + id + "', '" + value + "')");
//   document.getElementById(id).innerHTML = value;
  document.getElementById(id).setAttribute('value', value);
}

// radio select set value
function rsv(id1, id2, v)
{
  console.log("rsv('" + id1 + "', '" + id2 + "', '" + v + "')");
  if(v == 1)
    document.getElementById(id1).checked = true;
  else
    document.getElementById(id2).checked = true;
}


function table_add_row(id, c1html, c2html, c3html)
{
  console.log("table_add_row('" +  id + "', '" + c1html + "', '" + c2html + "', '"+ c3html + "')");

  var table = document.getElementById(id);
  var row = table.insertRow(-1);
  var cell1 = row.insertCell(0);

  cell1.innerHTML = c1html

  if (typeof c2html !== 'undefined')
  {
    var cell = row.insertCell(1);
    cell.innerHTML = c2html;
  }
  if (typeof c3html !== 'undefined')
  {
    var cell = row.insertCell(2);
    cell.innerHTML = c3html;
  }
}


function batcal_add_row(cell, voltage, modifier)
{
  console.log("batcal_add_row('" +  cell + "', '" + voltage + "', '" + modifier + "')");

  var table = document.getElementById('battery_table');
  var row = table.insertRow(-1);

  var cell1 = row.insertCell(0);
  cell1.innerHTML = cell;

  // volt old
  var cell2 = row.insertCell(1);
  cell2.innerHTML = "<input id='bv_old" + cell + "' type=text name='bv_old" + cell + "' value='" + voltage + "' readonly>";

  // mod old
  var cell3 = row.insertCell(2);
//   cell3.innerHTML = modifier;
  cell3.innerHTML = "<input id='bvm_old" + cell + "' type=text name='bvm_old" + cell + "' value='" + modifier + "' readonly>";

  // volt new
  var cell4 = row.insertCell(3);
  cell4.innerHTML = "<input id='bv" + cell + "' type=text name='bv" + cell + "' value='" + voltage + "'  onchange=\"battery_calc("+ cell +")\" >";

  // mod new
  var cell5 = row.insertCell(4);
  cell5.innerHTML = "<input id='battery_volt_mod" + cell + "' type=text name='battery_volt_mod" + cell + "' value='" + modifier + "'>";
}

function battery_calc(cell)
{
  var mod_old = document.getElementById("bvm_old"+cell).value;
  var volt_old = document.getElementById("bv_old"+cell).value;
  var volt_new = document.getElementById("bv"+cell).value;

  var mod_new = (volt_new / volt_old) * mod_old;
  document.getElementById("battery_volt_mod"+cell).value = mod_new;

}
